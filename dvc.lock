schema: '2.0'
stages:
  prepare:
    cmd: python3 src/data/prepare_dataset.py
    deps:
    - path: data/raw/fashion_mnist
      md5: f539bc8bff1140de9543af7be729a9ff.dir
      size: 35407815
      nfiles: 70001
    - path: src/data/prepare_dataset.py
      md5: 7c2d1168aac9553b96d6aec74b10083b
      size: 1629
    params:
      params.yaml:
        prepare.random_state: 42
        prepare.supervision: 0.05
    outs:
    - path: data/processed/X.npy
      md5: bef9c76d6ad4ac9c35cdafe145e37f6b
      size: 439040128
    - path: data/processed/X_test.npy
      md5: fe213818645797581e510047ad40ddbb
      size: 417088128
    - path: data/processed/y_test.npy
      md5: 9f36132b1118750624d474fed1ee6f3b
      size: 532128
    - path: data/processed/y_train.npy
      md5: f55403e9c15c336a803eb576915f55e8
      size: 560128
  train:
    cmd: python3 src/models/train_model.py
    deps:
    - path: data/processed/X.npy
      md5: bef9c76d6ad4ac9c35cdafe145e37f6b
      size: 439040128
    - path: data/processed/y_train.npy
      md5: f55403e9c15c336a803eb576915f55e8
      size: 560128
    - path: src/models/train_model.py
      md5: aacf202d59dcc86d25b021674e5fa1f1
      size: 1009
    params:
      params.yaml:
        train.batch_size: 256
        train.epochs: 10
        train.max_iter: 3000
        train.tol: 0.001
    outs:
    - path: models/model.tf
      md5: cf24e0477e0bed3f4c6c36825ec8c28c.dir
      size: 1823702
      nfiles: 5
  evaluate:
    cmd: python3 src/models/evaluate_model.py
    deps:
    - path: data/processed/X_test.npy
      md5: fe213818645797581e510047ad40ddbb
      size: 417088128
    - path: data/processed/y_test.npy
      md5: 9f36132b1118750624d474fed1ee6f3b
      size: 532128
    - path: models/model.tf
      md5: cf24e0477e0bed3f4c6c36825ec8c28c.dir
      size: 1823702
      nfiles: 5
    - path: src/models/evaluate_model.py
      md5: b3eb6ddeff1dd6ef25f7ab2ea2269630
      size: 783
