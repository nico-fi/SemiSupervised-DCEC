schema: '2.0'
stages:
  prepare:
    cmd: python3 src/data/prepare_dataset.py
    deps:
    - path: data/raw/fashion_mnist
      md5: f539bc8bff1140de9543af7be729a9ff.dir
      size: 35407815
      nfiles: 70001
    - path: src/data/prepare_dataset.py
      md5: bf932ca49d9e603ff0c21a56001c4d47
      size: 2929
    params:
      params.yaml:
        prepare.random_state: 42
        prepare.supervision: 0.05
    outs:
    - path: data/ge/fashion_mnist.csv
      md5: 60b53c77489e84f97d5f7d91e8033a54
      size: 3376451
    - path: data/processed/x.npy
      md5: bef9c76d6ad4ac9c35cdafe145e37f6b
      size: 439040128
    - path: data/processed/x_test.npy
      md5: fe213818645797581e510047ad40ddbb
      size: 417088128
    - path: data/processed/y_test.npy
      md5: 9f36132b1118750624d474fed1ee6f3b
      size: 532128
    - path: data/processed/y_train.npy
      md5: f55403e9c15c336a803eb576915f55e8
      size: 560128
  train:
    cmd: PYTHONHASHSEED=0 python3 src/models/train_model.py
    deps:
    - path: data/processed/x.npy
      md5: bef9c76d6ad4ac9c35cdafe145e37f6b
      size: 439040128
    - path: data/processed/y_train.npy
      md5: f55403e9c15c336a803eb576915f55e8
      size: 560128
    - path: src/models/train_model.py
      md5: 87407d993825ed21335d3dff11380719
      size: 7048
    params:
      params.yaml:
        train.batch_size: 256
        train.epochs: 10
        train.max_iter: 4000
        train.random_state: 42
        train.tol: 0.001
    outs:
    - path: models/model.tf
      md5: 0f0ac43b42dc1c59ff1265492ec921ea.dir
      size: 1822299
      nfiles: 4
  evaluate:
    cmd: python3 src/models/evaluate_model.py
    deps:
    - path: data/processed/x_test.npy
      md5: fe213818645797581e510047ad40ddbb
      size: 417088128
    - path: data/processed/y_test.npy
      md5: 9f36132b1118750624d474fed1ee6f3b
      size: 532128
    - path: models/model.tf
      md5: 0f0ac43b42dc1c59ff1265492ec921ea.dir
      size: 1822299
      nfiles: 4
    - path: src/models/evaluate_model.py
      md5: 1ee4e69c209055f10dc58c5dd82a5692
      size: 1263
    outs:
    - path: models/score.json
      md5: 082c7200885d43d40a95f6feec62edd6
      size: 38
