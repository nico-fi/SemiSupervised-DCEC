schema: '2.0'
stages:
  prepare:
    cmd: python3 src/data/prepare_dataset.py
    deps:
    - path: data/raw/fashion_mnist
      md5: f539bc8bff1140de9543af7be729a9ff.dir
      size: 35407815
      nfiles: 70001
    - path: src/data/prepare_dataset.py
      md5: dfc69994e954db05c09ec83336ab466d
      size: 1963
    params:
      params.yaml:
        prepare.random_state: 42
        prepare.supervision: 0.05
    outs:
    - path: data/processed/X.npy
      md5: bef9c76d6ad4ac9c35cdafe145e37f6b
      size: 439040128
    - path: data/processed/X_test.npy
      md5: fe213818645797581e510047ad40ddbb
      size: 417088128
    - path: data/processed/y_test.npy
      md5: 9f36132b1118750624d474fed1ee6f3b
      size: 532128
    - path: data/processed/y_train.npy
      md5: f55403e9c15c336a803eb576915f55e8
      size: 560128
  train:
    cmd: PYTHONHASHSEED=0 python3 src/models/train_model.py
    deps:
    - path: data/processed/X.npy
      md5: bef9c76d6ad4ac9c35cdafe145e37f6b
      size: 439040128
    - path: data/processed/y_train.npy
      md5: f55403e9c15c336a803eb576915f55e8
      size: 560128
    - path: src/models/train_model.py
      md5: edfe2864800a2ae793e586cd7dd91954
      size: 6819
    params:
      params.yaml:
        train.batch_size: 256
        train.epochs: 10
        train.max_iter: 3000
        train.tol: 0.001
    outs:
    - path: models/model.tf
      md5: bdcdca8670a185bc434c9d95f4405efc.dir
      size: 1823726
      nfiles: 5
  evaluate:
    cmd: python3 src/models/evaluate_model.py
    deps:
    - path: data/processed/X_test.npy
      md5: fe213818645797581e510047ad40ddbb
      size: 417088128
    - path: data/processed/y_test.npy
      md5: 9f36132b1118750624d474fed1ee6f3b
      size: 532128
    - path: models/model.tf
      md5: bdcdca8670a185bc434c9d95f4405efc.dir
      size: 1823726
      nfiles: 5
    - path: src/models/evaluate_model.py
      md5: a2585581969040ae349593074a4beac6
      size: 1024
