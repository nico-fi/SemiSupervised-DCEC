schema: '2.0'
stages:
  prepare:
    cmd: python3 src/data/prepare_dataset.py
    deps:
    - path: data/raw/fashion_mnist
      md5: f539bc8bff1140de9543af7be729a9ff.dir
      size: 35407815
      nfiles: 70001
    - path: src/data/prepare_dataset.py
      md5: 1fb2ebad67c337bebc1de36f9198e2b1
      size: 2093
    params:
      params.yaml:
        prepare.random_state: 42
        prepare.supervision: 0.05
    outs:
    - path: data/processed/x.npy
      md5: bef9c76d6ad4ac9c35cdafe145e37f6b
      size: 439040128
    - path: data/processed/x_test.npy
      md5: fe213818645797581e510047ad40ddbb
      size: 417088128
    - path: data/processed/y_test.npy
      md5: 9f36132b1118750624d474fed1ee6f3b
      size: 532128
    - path: data/processed/y_train.npy
      md5: f55403e9c15c336a803eb576915f55e8
      size: 560128
  train:
    cmd: PYTHONHASHSEED=0 python3 src/models/train_model.py
    deps:
    - path: data/processed/x.npy
      md5: bef9c76d6ad4ac9c35cdafe145e37f6b
      size: 439040128
    - path: data/processed/y_train.npy
      md5: f55403e9c15c336a803eb576915f55e8
      size: 560128
    - path: src/models/train_model.py
      md5: 8af3b7e71127821055ecc6856c88ed8c
      size: 6771
    params:
      params.yaml:
        train.batch_size: 256
        train.epochs: 10
        train.max_iter: 3000
        train.tol: 0.001
    outs:
    - path: models/model.tf
      md5: c9f9ab2e2c8c658c059be8d464cf71a5.dir
      size: 1823726
      nfiles: 5
  evaluate:
    cmd: python3 src/models/evaluate_model.py
    deps:
    - path: data/processed/x_test.npy
      md5: fe213818645797581e510047ad40ddbb
      size: 417088128
    - path: data/processed/y_test.npy
      md5: 9f36132b1118750624d474fed1ee6f3b
      size: 532128
    - path: models/model.tf
      md5: c9f9ab2e2c8c658c059be8d464cf71a5.dir
      size: 1823726
      nfiles: 5
    - path: src/models/evaluate_model.py
      md5: 031d8edcfbf6da975bd6abf2167d0e24
      size: 1244
